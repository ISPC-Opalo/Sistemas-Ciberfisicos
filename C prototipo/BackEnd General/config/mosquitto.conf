# Configuración Mosquitto MQTT Broker para GASLYT
# Permite conexiones WebSocket y MQTT estándar

# Configuración básica
listener 1883
protocol mqtt

# WebSocket para conexiones web
listener 9001
protocol websockets

# Configuración de persistencia
persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log

# Configuración de seguridad
allow_anonymous true

# Configuración de conexiones
max_connections 1000
max_inflight_messages 100
max_queued_messages 1000

# Configuración de mensajes
message_size_limit 0
max_keepalive 65535

# Configuración de QoS
upgrade_outgoing_qos false

# Configuración de logs
log_type error
log_type warning
log_type notice
log_type information
log_type debug

# Configuración de bridge (para conectar con otros brokers)
# bridge_cafile /mosquitto/config/ca.crt
# bridge_certfile /mosquitto/config/client.crt
# bridge_keyfile /mosquitto/config/client.key

# Configuración de ACL (Access Control List)
# acl_file /mosquitto/config/acl.conf

# Configuración de usuarios
# password_file /mosquitto/config/passwd

# Configuración de certificados SSL/TLS
# cafile /mosquitto/config/ca.crt
# certfile /mosquitto/config/server.crt
# keyfile /mosquitto/config/server.key

# Configuración de autenticación
# auth_plugin /usr/lib/mosquitto_dynamic_security.so
# auth_opt_config_file /mosquitto/config/dynamic-security.json
